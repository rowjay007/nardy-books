{"version":3,"file":"paymentService.js","sources":["services/paymentService.ts"],"sourceRoot":"/","sourcesContent":["import * as PaymentRepository from \"../repositories/paymentRepository\";\nimport { IPayment } from \"../models/paymentModel\";\nimport { initializePayment, verifyPayment } from \"../utils/paystack\";\nimport {\n  initializeFlutterwavePayment as initFlutterwavePayment,\n  verifyFlutterwavePayment as verifyFlutterwavePaymentUtil,\n} from \"../utils/flutterwave\";\nimport { generateUniqueReference } from \"../utils/referenceTag\";\n\nexport const createPayment = async (\n  paymentData: Partial<IPayment>\n): Promise<IPayment> => {\n  const reference = generateUniqueReference(\"ADM_\");\n  paymentData.reference = reference;\n\n  return PaymentRepository.create(paymentData);\n};\n\nexport const getPaymentById = async (id: string): Promise<IPayment | null> => {\n  return PaymentRepository.findById(id);\n};\n\nexport const getAllPayments = async (\n  filter: any,\n  sort: any,\n  page: number,\n  limit: number\n): Promise<IPayment[]> => {\n  return PaymentRepository.findAll(filter, sort, page, limit);\n};\n\nexport const updatePayment = async (\n  id: string,\n  updateData: Partial<IPayment>\n): Promise<IPayment | null> => {\n  return PaymentRepository.update(id, updateData);\n};\n\nexport const deletePayment = async (id: string): Promise<void> => {\n  await PaymentRepository.remove(id);\n};\n\nexport const processPaystackPayment = async (\n  amount: number,\n  email: string\n): Promise<any> => {\n  const reference = generateUniqueReference(\"PSK_\");\n  const response = await initializePayment(amount, email, reference);\n  return { response, reference };\n};\n\nexport const verifyPaystackPayment = async (\n  reference: string\n): Promise<any> => {\n  return verifyPayment(reference);\n};\n\nexport const processFlutterwavePayment = async (\n  amount: number,\n  email: string\n): Promise<any> => {\n  const reference = generateUniqueReference(\"FLW_\");\n  const response = await initFlutterwavePayment(amount, email, reference);\n  return { response, reference };\n};\n\nexport const verifyFlutterwavePayment = async (\n  reference: string\n): Promise<any> => {\n  return verifyFlutterwavePaymentUtil(reference);\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qFAAuE;AAEvE,gDAAqE;AACrE,sDAG8B;AAC9B,wDAAgE;AAEzD,MAAM,aAAa,GAAG,CAC3B,WAA8B,EACX,EAAE;IACrB,MAAM,SAAS,GAAG,IAAA,sCAAuB,EAAC,MAAM,CAAC,CAAC;IAClD,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC;IAElC,OAAO,iBAAiB,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;AAC/C,CAAC,CAAA,CAAC;AAPW,QAAA,aAAa,iBAOxB;AAEK,MAAM,cAAc,GAAG,CAAO,EAAU,EAA4B,EAAE;IAC3E,OAAO,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AACxC,CAAC,CAAA,CAAC;AAFW,QAAA,cAAc,kBAEzB;AAEK,MAAM,cAAc,GAAG,CAC5B,MAAW,EACX,IAAS,EACT,IAAY,EACZ,KAAa,EACQ,EAAE;IACvB,OAAO,iBAAiB,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC9D,CAAC,CAAA,CAAC;AAPW,QAAA,cAAc,kBAOzB;AAEK,MAAM,aAAa,GAAG,CAC3B,EAAU,EACV,UAA6B,EACH,EAAE;IAC5B,OAAO,iBAAiB,CAAC,MAAM,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC;AAClD,CAAC,CAAA,CAAC;AALW,QAAA,aAAa,iBAKxB;AAEK,MAAM,aAAa,GAAG,CAAO,EAAU,EAAiB,EAAE;IAC/D,MAAM,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACrC,CAAC,CAAA,CAAC;AAFW,QAAA,aAAa,iBAExB;AAEK,MAAM,sBAAsB,GAAG,CACpC,MAAc,EACd,KAAa,EACC,EAAE;IAChB,MAAM,SAAS,GAAG,IAAA,sCAAuB,EAAC,MAAM,CAAC,CAAC;IAClD,MAAM,QAAQ,GAAG,MAAM,IAAA,4BAAiB,EAAC,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;IACnE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;AACjC,CAAC,CAAA,CAAC;AAPW,QAAA,sBAAsB,0BAOjC;AAEK,MAAM,qBAAqB,GAAG,CACnC,SAAiB,EACH,EAAE;IAChB,OAAO,IAAA,wBAAa,EAAC,SAAS,CAAC,CAAC;AAClC,CAAC,CAAA,CAAC;AAJW,QAAA,qBAAqB,yBAIhC;AAEK,MAAM,yBAAyB,GAAG,CACvC,MAAc,EACd,KAAa,EACC,EAAE;IAChB,MAAM,SAAS,GAAG,IAAA,sCAAuB,EAAC,MAAM,CAAC,CAAC;IAClD,MAAM,QAAQ,GAAG,MAAM,IAAA,0CAAsB,EAAC,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;IACxE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;AACjC,CAAC,CAAA,CAAC;AAPW,QAAA,yBAAyB,6BAOpC;AAEK,MAAM,wBAAwB,GAAG,CACtC,SAAiB,EACH,EAAE;IAChB,OAAO,IAAA,sCAA4B,EAAC,SAAS,CAAC,CAAC;AACjD,CAAC,CAAA,CAAC;AAJW,QAAA,wBAAwB,4BAInC","debug_id":"1e073bf2-57fd-5919-b84f-251b65edfac4"}