{"version":3,"file":"paymentController.js","sources":["controllers/paymentController.ts"],"sourceRoot":"/","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport * as PaymentService from \"../services/paymentService\";\nimport catchAsync from \"../utils/catchAsync\";\n\nexport const createPayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const payment = await PaymentService.createPayment(req.body);\n    res.status(201).json({ status: \"success\", data: { payment } });\n  }\n);\n\nexport const getPaymentById = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const payment = await PaymentService.getPaymentById(req.params.id);\n    res.status(200).json({ status: \"success\", data: { payment } });\n  }\n);\n\nexport const getAllPayments = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const { filter, sort, page, limit } = req.query;\n    const payments = await PaymentService.getAllPayments(\n      JSON.parse((filter as string) || \"{}\"),\n      JSON.parse((sort as string) || \"{}\"),\n      parseInt(page as string, 10) || 1,\n      parseInt(limit as string, 10) || 10\n    );\n    res.status(200).json({ status: \"success\", data: { payments } });\n  }\n);\n\nexport const updatePayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const payment = await PaymentService.updatePayment(req.params.id, req.body);\n    res.status(200).json({ status: \"success\", data: { payment } });\n  }\n);\n\nexport const deletePayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    await PaymentService.deletePayment(req.params.id);\n    res.status(204).json({ status: \"success\", data: null });\n  }\n);\n\nexport const processPaystackPayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const { amount, email } = req.body;\n    const { response, reference } = await PaymentService.processPaystackPayment(\n      amount,\n      email\n    );\n    res.status(200).json({ status: \"success\", data: { response, reference } });\n  }\n);\n\nexport const verifyPaystackPayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const { reference } = req.params;\n    const response = await PaymentService.verifyPaystackPayment(reference);\n    res.status(200).json({ status: \"success\", data: { response } });\n  }\n);\n\nexport const processFlutterwavePayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const { amount, email } = req.body;\n    const { response, reference } =\n      await PaymentService.processFlutterwavePayment(amount, email);\n    res.status(200).json({ status: \"success\", data: { response, reference } });\n  }\n);\n\nexport const verifyFlutterwavePayment = catchAsync(\n  async (req: Request, res: Response, next: NextFunction) => {\n    const { reference } = req.params;\n    const response = await PaymentService.verifyFlutterwavePayment(reference);\n    res.status(200).json({ status: \"success\", data: { response } });\n  }\n);\n"],"names":[],"mappings":"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","debug_id":"c2f2a72d-214a-502d-893f-9a0c298e246c"}