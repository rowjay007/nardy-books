{"version":3,"file":"subscriptionController.js","sources":["controllers/subscriptionController.ts"],"sourceRoot":"/","sourcesContent":["import { Request, Response } from \"express\";\nimport * as subscriptionService from \"../services/subscriptionService\";\nimport catchAsync from \"../utils/catchAsync\";\nimport AppError from \"../utils/appError\";\n\n/**\n * Controller function create a subscription\n * @param req Express request object with body containing subscription data\n * @param res Express response object\n * @param next Express next function\n */\nexport const createSubscription = catchAsync(\n  async (req: Request, res: Response) => {\n    const subscription = await subscriptionService.createSubscription(req.body);\n    res.status(201).json(subscription);\n  }\n);\n\n/**\n * Controller function get all subscriptions\n * @param req Express request object\n * @param res Express response object\n * @param next Express next function\n */\nexport const getSubscriptions = catchAsync(\n  async (req: Request, res: Response) => {\n    const { filter, sort, page, limit } = req.query;\n    const subscriptions = await subscriptionService.getSubscriptions(\n      filter ? JSON.parse(filter as string) : {},\n      sort ? JSON.parse(sort as string) : { createdAt: -1 },\n      parseInt(page as string, 10) || 1,\n      parseInt(limit as string, 10) || 10\n    );\n    res.status(200).json(subscriptions);\n  }\n);\n\n/**\n * Controller function get a subscription by ID\n * @param req Express request object\n * @param res Express response object\n * @param next Express next function\n */\nexport const getSubscriptionById = catchAsync(\n  async (req: Request, res: Response) => {\n    const subscription = await subscriptionService.getSubscriptionById(\n      req.params.id\n    );\n    if (!subscription) {\n      throw new AppError(\"Subscription not found\", 404);\n    }\n    res.status(200).json(subscription);\n  }\n);\n\n/**\n * Controller function update a subscription\n * @param req Express request object\n * @param res Express response object\n * @param next Express next function\n */\nexport const updateSubscription = catchAsync(\n  async (req: Request, res: Response) => {\n    const subscription = await subscriptionService.updateSubscription(\n      req.params.id,\n      req.body\n    );\n    if (!subscription) {\n      throw new AppError(\"Subscription not found\", 404);\n    }\n    res.status(200).json(subscription);\n  }\n);\n\n/**\n * Controller function delete a subscription\n * @param req Express request object\n * @param res Express response object\n * @param next Express next function\n */\nexport const deleteSubscription = catchAsync(\n  async (req: Request, res: Response) => {\n    await subscriptionService.deleteSubscription(req.params.id);\n    res.status(200).json({\n      status: \"success\",\n      message: \"Subscription successfully deleted\",\n      data: null,\n    });\n  }\n);\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,qFAAuE;AACvE,qEAA6C;AAC7C,iEAAyC;AAEzC;;;;;GAKG;AACU,QAAA,kBAAkB,GAAG,IAAA,oBAAU,EAC1C,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACpC,MAAM,YAAY,GAAG,MAAM,mBAAmB,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC5E,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACrC,CAAC,CAAA,CACF,CAAC;AAEF;;;;;GAKG;AACU,QAAA,gBAAgB,GAAG,IAAA,oBAAU,EACxC,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACpC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC;IAChD,MAAM,aAAa,GAAG,MAAM,mBAAmB,CAAC,gBAAgB,CAC9D,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAgB,CAAC,CAAC,CAAC,CAAC,EAAE,EAC1C,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAc,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,EACrD,QAAQ,CAAC,IAAc,EAAE,EAAE,CAAC,IAAI,CAAC,EACjC,QAAQ,CAAC,KAAe,EAAE,EAAE,CAAC,IAAI,EAAE,CACpC,CAAC;IACF,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AACtC,CAAC,CAAA,CACF,CAAC;AAEF;;;;;GAKG;AACU,QAAA,mBAAmB,GAAG,IAAA,oBAAU,EAC3C,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACpC,MAAM,YAAY,GAAG,MAAM,mBAAmB,CAAC,mBAAmB,CAChE,GAAG,CAAC,MAAM,CAAC,EAAE,CACd,CAAC;IACF,IAAI,CAAC,YAAY,EAAE,CAAC;QAClB,MAAM,IAAI,kBAAQ,CAAC,wBAAwB,EAAE,GAAG,CAAC,CAAC;IACpD,CAAC;IACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACrC,CAAC,CAAA,CACF,CAAC;AAEF;;;;;GAKG;AACU,QAAA,kBAAkB,GAAG,IAAA,oBAAU,EAC1C,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACpC,MAAM,YAAY,GAAG,MAAM,mBAAmB,CAAC,kBAAkB,CAC/D,GAAG,CAAC,MAAM,CAAC,EAAE,EACb,GAAG,CAAC,IAAI,CACT,CAAC;IACF,IAAI,CAAC,YAAY,EAAE,CAAC;QAClB,MAAM,IAAI,kBAAQ,CAAC,wBAAwB,EAAE,GAAG,CAAC,CAAC;IACpD,CAAC;IACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AACrC,CAAC,CAAA,CACF,CAAC;AAEF;;;;;GAKG;AACU,QAAA,kBAAkB,GAAG,IAAA,oBAAU,EAC1C,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACpC,MAAM,mBAAmB,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IAC5D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACnB,MAAM,EAAE,SAAS;QACjB,OAAO,EAAE,mCAAmC;QAC5C,IAAI,EAAE,IAAI;KACX,CAAC,CAAC;AACL,CAAC,CAAA,CACF,CAAC","debug_id":"7896a94d-82f7-583a-9f0a-84d73397b63d"}