{"version":3,"file":"paymentRepository.js","sources":["repositories/paymentRepository.ts"],"sourceRoot":"/","sourcesContent":["import Payment, { IPayment } from \"../models/paymentModel\";\nimport { Query } from \"mongoose\";\n\nexport const create = async (\n  paymentData: Partial<IPayment>\n): Promise<IPayment> => {\n  const payment = new Payment(paymentData);\n  return payment.save();\n};\n\nexport const findById = async (id: string): Promise<IPayment | null> => {\n  return Payment.findById(id).populate(\"user\").exec();\n};\n\nexport const findAll = async (\n  filter: any,\n  sort: any,\n  page: number,\n  limit: number\n): Promise<IPayment[]> => {\n  const query = buildQuery(filter)\n    .sort(sort)\n    .skip((page - 1) * limit)\n    .limit(limit);\n  return query.exec();\n};\n\nexport const update = async (\n  id: string,\n  updateData: Partial<IPayment>\n): Promise<IPayment | null> => {\n  return Payment.findByIdAndUpdate(id, updateData, { new: true }).exec();\n};\n\nexport const remove = async (id: string): Promise<IPayment | null> => {\n  return Payment.findByIdAndDelete(id).exec();\n};\n\nfunction buildQuery(filter: any): Query<IPayment[], IPayment, {}> {\n  let query = Payment.find();\n\n  if (filter.method) {\n    query = query.where(\"method\").equals(filter.method);\n  }\n  if (filter.status) {\n    query = query.where(\"status\").equals(filter.status);\n  }\n\n  return query;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,0EAA2D;AAGpD,MAAM,MAAM,GAAG,CACpB,WAA8B,EACX,EAAE;IACrB,MAAM,OAAO,GAAG,IAAI,sBAAO,CAAC,WAAW,CAAC,CAAC;IACzC,OAAO,OAAO,CAAC,IAAI,EAAE,CAAC;AACxB,CAAC,CAAA,CAAC;AALW,QAAA,MAAM,UAKjB;AAEK,MAAM,QAAQ,GAAG,CAAO,EAAU,EAA4B,EAAE;IACrE,OAAO,sBAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;AACtD,CAAC,CAAA,CAAC;AAFW,QAAA,QAAQ,YAEnB;AAEK,MAAM,OAAO,GAAG,CACrB,MAAW,EACX,IAAS,EACT,IAAY,EACZ,KAAa,EACQ,EAAE;IACvB,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC;SAC7B,IAAI,CAAC,IAAI,CAAC;SACV,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;SACxB,KAAK,CAAC,KAAK,CAAC,CAAC;IAChB,OAAO,KAAK,CAAC,IAAI,EAAE,CAAC;AACtB,CAAC,CAAA,CAAC;AAXW,QAAA,OAAO,WAWlB;AAEK,MAAM,MAAM,GAAG,CACpB,EAAU,EACV,UAA6B,EACH,EAAE;IAC5B,OAAO,sBAAO,CAAC,iBAAiB,CAAC,EAAE,EAAE,UAAU,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;AACzE,CAAC,CAAA,CAAC;AALW,QAAA,MAAM,UAKjB;AAEK,MAAM,MAAM,GAAG,CAAO,EAAU,EAA4B,EAAE;IACnE,OAAO,sBAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;AAC9C,CAAC,CAAA,CAAC;AAFW,QAAA,MAAM,UAEjB;AAEF,SAAS,UAAU,CAAC,MAAW;IAC7B,IAAI,KAAK,GAAG,sBAAO,CAAC,IAAI,EAAE,CAAC;IAE3B,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;QAClB,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACtD,CAAC;IACD,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;QAClB,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACtD,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC","debug_id":"cf2723e3-f725-5fe2-89e5-589c85d393a5"}