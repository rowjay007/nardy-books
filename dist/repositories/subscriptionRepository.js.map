{"version":3,"file":"subscriptionRepository.js","sources":["repositories/subscriptionRepository.ts"],"sourceRoot":"/","sourcesContent":["import Subscription, { ISubscription } from \"../models/subscriptionModel\";\nimport { Types } from \"mongoose\";\nimport AppError from \"../utils/appError\";\n\nexport const createSubscription = async (subscriptionData: ISubscription) => {\n  const subscription = new Subscription(subscriptionData);\n  return await subscription.save();\n};\n\nexport const getSubscriptions = async (\n  filter: Record<string, any>,\n  sort: Record<string, any>,\n  page: number,\n  limit: number\n) => {\n  const options = {\n    populate: \"users\",\n    sort,\n    skip: (page - 1) * limit,\n    limit,\n  };\n\n  return await Subscription.find(filter, null, options);\n};\n\nexport const getSubscriptionById = async (id: string) => {\n  if (!Types.ObjectId.isValid(id)) throw new AppError(\"Invalid ID\", 400);\n  return await Subscription.findById(id).populate(\"users\");\n};\n\nexport const updateSubscription = async (\n  id: string,\n  subscriptionData: ISubscription\n) => {\n  if (!Types.ObjectId.isValid(id)) throw new AppError(\"Invalid ID\", 400);\n  return await Subscription.findByIdAndUpdate(id, subscriptionData, {\n    new: true,\n    runValidators: true,\n  });\n};\n\nexport const deleteSubscription = async (id: string) => {\n  if (!Types.ObjectId.isValid(id)) throw new AppError(\"Invalid ID\", 400);\n  return await Subscription.findByIdAndDelete(id);\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,oFAA0E;AAC1E,uCAAiC;AACjC,iEAAyC;AAElC,MAAM,kBAAkB,GAAG,CAAO,gBAA+B,EAAE,EAAE;IAC1E,MAAM,YAAY,GAAG,IAAI,2BAAY,CAAC,gBAAgB,CAAC,CAAC;IACxD,OAAO,MAAM,YAAY,CAAC,IAAI,EAAE,CAAC;AACnC,CAAC,CAAA,CAAC;AAHW,QAAA,kBAAkB,sBAG7B;AAEK,MAAM,gBAAgB,GAAG,CAC9B,MAA2B,EAC3B,IAAyB,EACzB,IAAY,EACZ,KAAa,EACb,EAAE;IACF,MAAM,OAAO,GAAG;QACd,QAAQ,EAAE,OAAO;QACjB,IAAI;QACJ,IAAI,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,KAAK;QACxB,KAAK;KACN,CAAC;IAEF,OAAO,MAAM,2BAAY,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACxD,CAAC,CAAA,CAAC;AAdW,QAAA,gBAAgB,oBAc3B;AAEK,MAAM,mBAAmB,GAAG,CAAO,EAAU,EAAE,EAAE;IACtD,IAAI,CAAC,gBAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC;QAAE,MAAM,IAAI,kBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;IACvE,OAAO,MAAM,2BAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC3D,CAAC,CAAA,CAAC;AAHW,QAAA,mBAAmB,uBAG9B;AAEK,MAAM,kBAAkB,GAAG,CAChC,EAAU,EACV,gBAA+B,EAC/B,EAAE;IACF,IAAI,CAAC,gBAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC;QAAE,MAAM,IAAI,kBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;IACvE,OAAO,MAAM,2BAAY,CAAC,iBAAiB,CAAC,EAAE,EAAE,gBAAgB,EAAE;QAChE,GAAG,EAAE,IAAI;QACT,aAAa,EAAE,IAAI;KACpB,CAAC,CAAC;AACL,CAAC,CAAA,CAAC;AATW,QAAA,kBAAkB,sBAS7B;AAEK,MAAM,kBAAkB,GAAG,CAAO,EAAU,EAAE,EAAE;IACrD,IAAI,CAAC,gBAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC;QAAE,MAAM,IAAI,kBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;IACvE,OAAO,MAAM,2BAAY,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;AAClD,CAAC,CAAA,CAAC;AAHW,QAAA,kBAAkB,sBAG7B","debug_id":"f8709497-909d-571f-93b4-d344f408a344"}