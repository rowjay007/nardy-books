{"version":3,"file":"userModel.js","sources":["models/userModel.ts"],"sourceRoot":"/","sourcesContent":["import bcrypt from \"bcrypt\";\nimport mongoose, { CallbackError, Document, Schema } from \"mongoose\";\n\nexport interface IUser extends Document {\n  username: string;\n  email: string;\n  password: string;\n  isEmailVerified: boolean;\n  resetPasswordToken?: string;\n  resetPasswordExpires?: Date;\n  verificationToken?: string;\n  refreshToken?: string;\n}\n\nconst UserSchema: Schema<IUser> = new Schema({\n  username: { type: String, required: true, index: true },\n  email: { type: String, required: true, unique: true, index: true },\n  password: { type: String, required: true },\n  isEmailVerified: { type: Boolean, default: false },\n  resetPasswordToken: { type: String, index: true },\n  resetPasswordExpires: { type: Date, index: true },\n  verificationToken: { type: String, index: true },\n  refreshToken: { type: String, index: true },\n});\n\nUserSchema.pre<IUser>(\n  \"save\",\n  async function (next: (err?: CallbackError) => void) {\n    if (!this.isModified(\"password\")) return next();\n\n    try {\n      const salt = await bcrypt.genSalt(12);\n      this.password = await bcrypt.hash(this.password, salt);\n      next();\n    } catch (error) {\n      next(error as CallbackError);\n    }\n  }\n);\n\nconst User = mongoose.model<IUser>(\"User\", UserSchema);\n\nexport default User;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oDAA4B;AAC5B,qDAAqE;AAarE,MAAM,UAAU,GAAkB,IAAI,iBAAM,CAAC;IAC3C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IACvD,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IAClE,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,eAAe,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAClD,kBAAkB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;IACjD,oBAAoB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IACjD,iBAAiB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;IAChD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;CAC5C,CAAC,CAAC;AAEH,UAAU,CAAC,GAAG,CACZ,MAAM,EACN,UAAgB,IAAmC;;QACjD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;YAAE,OAAO,IAAI,EAAE,CAAC;QAEhD,IAAI,CAAC;YACH,MAAM,IAAI,GAAG,MAAM,gBAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACtC,IAAI,CAAC,QAAQ,GAAG,MAAM,gBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,EAAE,CAAC;QACT,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAsB,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;CAAA,CACF,CAAC;AAEF,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC;AAEvD,kBAAe,IAAI,CAAC","debug_id":"5aa1c2a7-e2f1-53cc-b7de-8b6154e95f30"}