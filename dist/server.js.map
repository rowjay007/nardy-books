{"version":3,"file":"server.js","sources":["server.ts"],"sourceRoot":"/","sourcesContent":["import app from \"./app\";\nimport connectDB from \"./config/db\";\nimport env from \"./config/env\";\nimport logger from \"./config/logger\";\nimport Sentry from \"./config/sentry\";\n\nconst PORT = env.PORT || 3000;\n\nconnectDB()\n  .then(() => {\n    const server = app.listen(PORT, () => {\n      logger.info(`Server running in ${env.NODE_ENV} mode on port ${PORT}`);\n    });\n\n    process.on(\"SIGINT\", () => {\n      logger.info(\"SIGINT received: Shutting down gracefully\");\n      server.close(() => {\n        logger.info(\"Server closed\");\n        process.exit(0);\n      });\n    });\n\n    process.on(\"unhandledRejection\", (err: any) => {\n      Sentry.captureException(err);\n      logger.error(`Unhandled Rejection: ${err.message}`);\n      server.close(() => process.exit(1));\n    });\n\n    process.on(\"uncaughtException\", (err: any) => {\n      Sentry.captureException(err);\n      logger.error(`Uncaught Exception: ${err.message}`);\n      server.close(() => process.exit(1));\n    });\n  })\n  .catch((err) => {\n    Sentry.captureException(err);\n    logger.error(`Error connecting to database: ${err.message}`);\n  });\n"],"names":[],"mappings":";;;;;;;AAAA,gDAAwB;AACxB,qDAAoC;AACpC,uDAA+B;AAC/B,6DAAqC;AACrC,6DAAqC;AAErC,MAAM,IAAI,GAAG,aAAG,CAAC,IAAI,IAAI,IAAI,CAAC;AAE9B,IAAA,YAAS,GAAE;KACR,IAAI,CAAC,GAAG,EAAE;IACT,MAAM,MAAM,GAAG,aAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;QACnC,gBAAM,CAAC,IAAI,CAAC,qBAAqB,aAAG,CAAC,QAAQ,iBAAiB,IAAI,EAAE,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE;QACxB,gBAAM,CAAC,IAAI,CAAC,2CAA2C,CAAC,CAAC;QACzD,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;YAChB,gBAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC7B,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,GAAQ,EAAE,EAAE;QAC5C,gBAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAC7B,gBAAM,CAAC,KAAK,CAAC,wBAAwB,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;QACpD,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,GAAQ,EAAE,EAAE;QAC3C,gBAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAC7B,gBAAM,CAAC,KAAK,CAAC,uBAAuB,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;KACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;IACb,gBAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;IAC7B,gBAAM,CAAC,KAAK,CAAC,iCAAiC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;AAC/D,CAAC,CAAC,CAAC","debug_id":"8191e049-f9ad-531a-8027-27c4199e6810"}