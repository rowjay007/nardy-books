{"version":3,"file":"emailUtils.js","sources":["utils/emailUtils.ts"],"sourceRoot":"/","sourcesContent":["import nodemailer from \"nodemailer\";\nimport env from \"../config/env\";\n\nconst transporter = nodemailer.createTransport({\n  host: env.EMAIL_HOST,\n  port: Number(env.EMAIL_PORT),\n  auth: {\n    user: env.EMAIL_USERNAME,\n    pass: env.EMAIL_PASSWORD,\n  },\n});\n\n\nconst templates = {\n  welcome: (to: string, username: string, verificationLink: string) => ({\n    from: env.EMAIL_USERNAME,\n    to,\n    subject: \"Welcome to Our Application!\",\n    html: `\n      <p>Dear ${username},</p>\n      <p>Welcome to our application! Please click the following link to verify your email:</p>\n      <a href=\"${verificationLink}\">${verificationLink}</a>\n      <p>Best regards,<br/>Your Application Team</p>\n    `,\n  }),\n\n  verification: (to: string, verificationLink: string) => ({\n    from: env.EMAIL_USERNAME,\n    to,\n    subject: \"Email Verification\",\n    html: `\n      <p>Dear User,</p>\n      <p>Please click the following link to verify your email:</p>\n      <a href=\"${verificationLink}\">${verificationLink}</a>\n      <p>Best regards,<br/>Your Application Team</p>\n    `,\n  }),\n\n  resetPassword: (to: string, resetLink: string) => ({\n    from: env.EMAIL_USERNAME,\n    to,\n    subject: \"Reset Your Password\",\n    html: `\n      <p>Dear User,</p>\n      <p>We received a request to reset your password. Please click the following link to reset it:</p>\n      <a href=\"${resetLink}\">${resetLink}</a>\n      <p>If you did not request this, you can safely ignore this email.</p>\n      <p>Best regards,<br/>Your Application Team</p>\n    `,\n  }),\n};\n\nexport const sendWelcomeEmail = async (\n  to: string,\n  username: string,\n  verificationLink: string\n): Promise<void> => {\n  const { from, subject, html } = templates.welcome(\n    to,\n    username,\n    verificationLink\n  );\n  await transporter.sendMail({ from, to, subject, html });\n};\n\nexport const sendVerificationEmail = async (\n  to: string,\n  verificationLink: string\n): Promise<void> => {\n  const { from, subject, html } = templates.verification(to, verificationLink);\n  await transporter.sendMail({ from, to, subject, html });\n};\n\nexport const sendResetPasswordEmail = async (\n  to: string,\n  resetLink: string\n): Promise<void> => {\n  const { from, subject, html } = templates.resetPassword(to, resetLink);\n  await transporter.sendMail({ from, to, subject, html });\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,4DAAoC;AACpC,wDAAgC;AAEhC,MAAM,WAAW,GAAG,oBAAU,CAAC,eAAe,CAAC;IAC7C,IAAI,EAAE,aAAG,CAAC,UAAU;IACpB,IAAI,EAAE,MAAM,CAAC,aAAG,CAAC,UAAU,CAAC;IAC5B,IAAI,EAAE;QACJ,IAAI,EAAE,aAAG,CAAC,cAAc;QACxB,IAAI,EAAE,aAAG,CAAC,cAAc;KACzB;CACF,CAAC,CAAC;AAGH,MAAM,SAAS,GAAG;IAChB,OAAO,EAAE,CAAC,EAAU,EAAE,QAAgB,EAAE,gBAAwB,EAAE,EAAE,CAAC,CAAC;QACpE,IAAI,EAAE,aAAG,CAAC,cAAc;QACxB,EAAE;QACF,OAAO,EAAE,6BAA6B;QACtC,IAAI,EAAE;gBACM,QAAQ;;iBAEP,gBAAgB,KAAK,gBAAgB;;KAEjD;KACF,CAAC;IAEF,YAAY,EAAE,CAAC,EAAU,EAAE,gBAAwB,EAAE,EAAE,CAAC,CAAC;QACvD,IAAI,EAAE,aAAG,CAAC,cAAc;QACxB,EAAE;QACF,OAAO,EAAE,oBAAoB;QAC7B,IAAI,EAAE;;;iBAGO,gBAAgB,KAAK,gBAAgB;;KAEjD;KACF,CAAC;IAEF,aAAa,EAAE,CAAC,EAAU,EAAE,SAAiB,EAAE,EAAE,CAAC,CAAC;QACjD,IAAI,EAAE,aAAG,CAAC,cAAc;QACxB,EAAE;QACF,OAAO,EAAE,qBAAqB;QAC9B,IAAI,EAAE;;;iBAGO,SAAS,KAAK,SAAS;;;KAGnC;KACF,CAAC;CACH,CAAC;AAEK,MAAM,gBAAgB,GAAG,CAC9B,EAAU,EACV,QAAgB,EAChB,gBAAwB,EACT,EAAE;IACjB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC,OAAO,CAC/C,EAAE,EACF,QAAQ,EACR,gBAAgB,CACjB,CAAC;IACF,MAAM,WAAW,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1D,CAAC,CAAA,CAAC;AAXW,QAAA,gBAAgB,oBAW3B;AAEK,MAAM,qBAAqB,GAAG,CACnC,EAAU,EACV,gBAAwB,EACT,EAAE;IACjB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC,YAAY,CAAC,EAAE,EAAE,gBAAgB,CAAC,CAAC;IAC7E,MAAM,WAAW,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1D,CAAC,CAAA,CAAC;AANW,QAAA,qBAAqB,yBAMhC;AAEK,MAAM,sBAAsB,GAAG,CACpC,EAAU,EACV,SAAiB,EACF,EAAE;IACjB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC,aAAa,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;IACvE,MAAM,WAAW,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1D,CAAC,CAAA,CAAC;AANW,QAAA,sBAAsB,0BAMjC","debug_id":"2978fea8-bbd7-522f-a879-08a86f73f3f4"}